<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xem B√†i Tarot - ƒê·∫∑t C√¢u H·ªèi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a12;
            overflow-x: hidden;
            color: #EAE0C8;
            padding-top: 1rem;
        }

        #animated-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -10;
            overflow: hidden;
            background-image: url('https://i.postimg.cc/XvZQgqh2/76363ee1c9bed71a54cfe87982e86447.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        #question-section-content h2,
        .tarot-card-front,
        .btn-action,
        .card-info-title,
        .ai-title,
        #display-user-question
        {
            font-family: 'Playfair Display', serif;
        }
        .tarot-card-front {
            font-family: 'IM Fell English SC', serif;
        }


        #question-section-content h2 { font-weight: 600; font-size: 1.75rem; color: #FFD700; }
        .ai-title { font-weight: 700; font-size: 1.75rem; }
        .card-info-title { font-weight: 600; font-size: 1.3rem; }
        .btn-action { font-weight: 600; }
        #display-user-question { font-weight: 400; font-style: italic; font-size: 1.1rem; color: #F5DEB3; }


        p,
        #user-question-input::placeholder,
        .card-info-meaning,
        .ai-text,
        .ai-text .highlighted-card-name,
        .ai-text strong,
        .ai-text em,
        #initial-info-message,
        #message-text
        {
            font-family: 'Inter', sans-serif;
        }
        #user-question-input {
            font-family: 'Playfair Display', serif;
        }

        .tarot-card-front span {
            font-size: 2.5rem;
        }


        .firefly {
            position: absolute;
            width: 3px;
            height: 3px;
            background-color: rgba(220, 255, 170, 0.8);
            border-radius: 50%;
            box-shadow: 0 0 6px 2px rgba(220, 255, 170, 0.7),
                        0 0 10px 4px rgba(255, 255, 224, 0.5);
            animation: firefly-movement 10s infinite;
            opacity: 0;
        }

        @keyframes firefly-movement {
            0%, 100% { opacity: 0.3; transform: scale(0.8) translate(0,0); }
            25% { opacity: 1; transform: scale(1.2) translate(20px, -30px); }
            50% { opacity: 0.8; transform: scale(1) translate(-15px, 25px); }
            75% { opacity: 1; transform: scale(1.1) translate(10px, 15px); }
        }

        .firefly:nth-child(1) { top: 20%; left: 10%; animation-duration: 12s; animation-delay: 0s; }
        .firefly:nth-child(2) { top: 50%; left: 80%; animation-duration: 9s; animation-delay: 1s; width: 2px; height: 2px;}
        .firefly:nth-child(3) { top: 80%; left: 30%; animation-duration: 15s; animation-delay: 2.5s; }
        .firefly:nth-child(4) { top: 10%; left: 90%; animation-duration: 10s; animation-delay: 4s; width: 4px; height: 4px;}
        .firefly:nth-child(5) { top: 65%; left: 50%; animation-duration: 13s; animation-delay: 1.5s; }
        /* Add more if needed */


        .card-base {
            width: 100px;
            height: 170px;
            border-radius: 8px;
            background-color: #A0522D;
            border: 2px solid #8B4513;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'IM Fell English SC', serif;
            color: #F5DEB3;
            font-size: 1.8rem;
            position: absolute;
        }

        #deck-pile {
            position: relative;
            width: 110px;
            height: 180px;
            margin: 20px auto;
            cursor: pointer;
        }
        #deck-pile .card-base {
            transition: transform 0.3s ease-out;
        }
        #deck-pile.shuffling .card-base:nth-child(1) { transform: translate(5px, -5px) rotate(5deg); }
        #deck-pile.shuffling .card-base:nth-child(2) { transform: translate(-5px, 0px) rotate(-3deg); }
        #deck-pile.shuffling .card-base:nth-child(3) { transform: translate(3px, 5px) rotate(2deg); }


        #cards-display-area {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 200px;
            gap: 20px; /* Kho·∫£ng c√°ch gi·ªØa c√°c l√° b√†i */
            margin-bottom: 2rem;
            flex-wrap: wrap; /* Cho ph√©p c√°c l√° b√†i xu·ªëng d√≤ng n·∫øu kh√¥ng ƒë·ªß ch·ªó */
        }

        .tarot-card-slot {
            width: 100px; /* K√≠ch th∆∞·ªõc l√° b√†i */
            height: 170px;
            perspective: 1000px;
            border-radius: 8px;
            position: relative;
        }

        .tarot-card-inner {
            position: absolute;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s, opacity 0.5s;
            transform-style: preserve-3d;
            border-radius: 8px;
            cursor: pointer;
            opacity: 0; /* B√†i ·∫©n ban ƒë·∫ßu cho hi·ªáu ·ª©ng deal */
        }
        .tarot-card-inner.dealt {
            opacity: 1; /* B√†i hi·ªán ra sau khi deal */
        }

        .tarot-card-slot.flipped .tarot-card-inner {
            transform: rotateY(180deg);
        }

        .tarot-card-front, .tarot-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .tarot-card-front {
            background-color: #A0522D; /* M√†u m·∫∑t tr∆∞·ªõc l√° b√†i */
            color: #F5DEB3;
            border: 2px solid #8B4513; /* Vi·ªÅn m·∫∑t tr∆∞·ªõc */
        }
        .tarot-card-front span { font-size: 2rem; }


        .tarot-card-back {
            background-color: #F5F5DC;
            color: #5D4037;
            transform: rotateY(180deg);
            overflow: hidden; /* ƒê·ªÉ bo tr√≤n ·∫£nh */
        }

        .tarot-card-back img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* ƒê·∫£m b·∫£o ·∫£nh v·ª´a kh√≠t v√† gi·ªØ t·ª∑ l·ªá */
            border-radius: 8px; /* Bo tr√≤n cho ·∫£nh */
            background-color: #F5F5DC; /* M√†u n·ªÅn fallback n·∫øu ·∫£nh l·ªói */
        }

        .btn-action {
            transition: all 0.3s ease;
        }
        .btn-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        .btn-submit-question {
            background-color: #FFD700; /* V√†ng ho√†ng kim */
            color: #4A2311; /* N√¢u ƒë·∫≠m cho ch·ªØ */
            border: 1px solid #B8860B; /* Vi·ªÅn v√†ng s·∫´m h∆°n */
            text-shadow: none; /* B·ªè b√≥ng ch·ªØ n·∫øu c√≥ */
            font-size: 1.1rem;
            padding-top: 0.85rem;
            padding-bottom: 0.85rem;
        }
        .btn-submit-question:hover {
            background-color: #F0C000; /* V√†ng s√°ng h∆°n khi hover */
            color: #3D1B0C;
        }
        #reset-cards-button {
            background-color: #8B0000; /* ƒê·ªè ƒë·∫≠m */
            color: #FFEBCD; /* M√†u ch·ªØ s√°ng */
            border: 1px solid #580000; /* Vi·ªÅn ƒë·ªè s·∫´m h∆°n */
            font-size: 1.1rem;
            padding-top: 0.85rem;
            padding-bottom: 0.85rem;
        }
        #reset-cards-button:hover {
            background-color: #580000; /* ƒê·ªè s·∫´m h∆°n khi hover */
        }


        .info-section-container {
            background-color: rgba(40, 20, 0, 0.85); /* N·ªÅn m·ªù t·ªëi h∆°n */
            backdrop-filter: blur(8px);
            border: 1px solid rgba(210, 180, 140, 0.3); /* Vi·ªÅn tan */
            border-radius: 12px;
            padding: 25px;
            margin-top: 1rem; /* TƒÉng kho·∫£ng c√°ch t·ª´ c√°c l√° b√†i */
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5); /* B√≥ng ƒë·ªï s√¢u h∆°n */
            width: 100%;
            max-width: 720px; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông t·ªëi ƒëa */
        }
        .card-info-title {
            color: #FFD700; /* V√†ng cho ti√™u ƒë·ªÅ l√° b√†i */
            margin-bottom: 5px;
        }
        .card-info-meaning {
            font-size: 0.95rem;
            color: #F5F5DC; /* M√†u be cho √Ω nghƒ©a */
            line-height: 1.7;
            margin-bottom: 15px; /* Kho·∫£ng c√°ch gi·ªØa c√°c √Ω nghƒ©a */
        }
        .ai-interpretation-container {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(210, 180, 140, 0.4); /* ƒê∆∞·ªùng k·∫ª ph√¢n c√°ch */
        }
        .ai-title {
            font-size: 1.75rem;
            color: #DAA520; /* V√†ng ƒë·ªìng cho ti√™u ƒë·ªÅ AI */
            margin-bottom: 10px;
            text-align: center;
        }
        .ai-text {
            font-size: 1rem;
            color: #EAE0C8; /* M√†u kem cho vƒÉn b·∫£n AI */
            line-height: 1.8;
            white-space: pre-wrap; /* Gi·ªØ nguy√™n ƒë·ªãnh d·∫°ng xu·ªëng d√≤ng */
        }
        .ai-text .highlighted-card-name {
            color: #FFDEAD; /* M√†u navajo white cho t√™n l√° b√†i ƒë∆∞·ª£c highlight */
            font-weight: bold;
        }
        .ai-text strong {
            color: #FFB74D; /* M√†u cam nh·∫°t cho ch·ªØ ƒë·∫≠m */
            font-weight: bold;
        }
        .ai-text em {
            color: #FFE0B2; /* M√†u m∆° cho ch·ªØ nghi√™ng */
            font-style: italic;
        }
        
        #question-section-content {
            background-color: rgba(60, 40, 20, 0.7); /* N·ªÅn n√¢u m·ªù */
            backdrop-filter: blur(5px);
            padding: 30px;
            border-radius: 1rem; /* Bo tr√≤n nhi·ªÅu h∆°n */
            margin-bottom: 30px;
            width: 100%;
            max-width: 700px; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông */
            box-shadow: 0 8px 25px rgba(0,0,0,0.4); /* B√≥ng ƒë·ªï r√µ h∆°n */
            border: 1px solid rgba(210, 180, 140, 0.25); /* Vi·ªÅn tinh t·∫ø */
        }
        #question-section-content h2 {
            color: #FFD700; /* M√†u v√†ng cho ti√™u ƒë·ªÅ */
            margin-bottom: 1.25rem; /* TƒÉng kho·∫£ng c√°ch d∆∞·ªõi */
        }

        #user-question-input {
            background-color: transparent;
            border: none; /* B·ªè vi·ªÅn */
            color: #FFF8DC; /* M√†u kem ƒë·∫≠m cho ch·ªØ */
            padding: 0.75rem 0.25rem;
            border-radius: 0; /* Kh√¥ng bo tr√≤n */
            font-size: 1.6rem; /* TƒÉng k√≠ch th∆∞·ªõc ch·ªØ */
            line-height: 1.5;
            min-height: 80px; /* Chi·ªÅu cao t·ªëi thi·ªÉu */
            resize: none; /* Kh√¥ng cho ph√©p thay ƒë·ªïi k√≠ch th∆∞·ªõc */
            outline: none; /* B·ªè vi·ªÅn khi focus */
            width: 100%;
            text-align: center; /* CƒÉn gi·ªØa ch·ªØ */
        }

        #user-question-input::placeholder {
            color: rgba(210, 180, 140, 0.7); /* M√†u tan nh·∫°t cho placeholder */
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 1.6rem; /* C√πng k√≠ch th∆∞·ªõc v·ªõi input */
            animation: blink-placeholder 1.5s infinite;
            text-align: center; /* CƒÉn gi·ªØa placeholder */
        }

        #user-question-input:focus::placeholder {
            animation: none; /* T·∫Øt animation khi focus */
            opacity: 0.4; /* L√†m m·ªù placeholder khi focus */
        }
        #user-question-input:not(:placeholder-shown)::placeholder {
            display: none; /* ·∫®n placeholder khi c√≥ ch·ªØ */
        }


        @keyframes blink-placeholder {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }


        .transitionable-section {
            transition: opacity 0.7s cubic-bezier(0.4, 0, 0.2, 1), transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
        }

        .section-hidden-state {
            opacity: 0;
            transform: translateY(30px) scale(0.95); /* Hi·ªáu ·ª©ng tr∆∞·ª£t v√† thu nh·ªè */
            pointer-events: none; /* Kh√¥ng cho t∆∞∆°ng t√°c khi ·∫©n */
        }

        .section-visible-state {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
        }

        .loader {
            border: 5px solid #8B4513; /* Vi·ªÅn n√¢u s·∫´m */
            border-top: 5px solid #FFD700; /* Top m√†u v√†ng */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">
    <div id="animated-background">
        </div>

    <div class="w-full max-w-3xl mx-auto text-center relative z-10"> <div id="question-section-wrapper" class="transitionable-section">
            <div id="question-section-content">
                <h2 class="mb-5">N√≥i cho ta bi·∫øt, ƒëi·ªÅu g√¨ ng∆∞∆°i t√¨m ki·∫øm?</h2>
                <textarea id="user-question-input" placeholder="V√≠ d·ª•: Con ƒë∆∞·ªùng n√†o ƒëang m·ªü ra cho ta?"></textarea>
                <button id="submit-question-button" class="btn-action btn-submit-question py-3 px-8 rounded-lg shadow-md mt-6 w-full focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-75">
                    Kh√°m Ph√° Th√¥ng ƒêi·ªáp Tarot
                </button>
            </div>
        </div>

        <div id="tarot-reading-section-wrapper" class="transitionable-section hidden"> <div id="tarot-reading-section-content">
                <p id="display-user-question" class="mt-2 mb-6"></p>
                
                <div id="deck-container" class="mb-8 hidden"> <p class="text-amber-200 mb-2 text-lg">ƒêang x√†o b√†i...</p>
                    <div id="deck-pile">
                        </div>
                </div>

                <div id="cards-display-area" class="mb-8 flex flex-wrap justify-center items-start">
                    <div id="card-slot-0" class="tarot-card-slot">
                        <div class="tarot-card-inner" data-card-index="0">
                            <div class="tarot-card-front"><span>üÇ†</span></div>
                            <div class="tarot-card-back">
                                <img src="" alt="L√° b√†i 1" id="card-img-0">
                            </div>
                        </div>
                    </div>
                    <div id="card-slot-1" class="tarot-card-slot">
                        <div class="tarot-card-inner" data-card-index="1">
                            <div class="tarot-card-front"><span>üÇ†</span></div>
                            <div class="tarot-card-back">
                                <img src="" alt="L√° b√†i 2" id="card-img-1">
                            </div>
                        </div>
                    </div>
                    <div id="card-slot-2" class="tarot-card-slot">
                        <div class="tarot-card-inner" data-card-index="2">
                            <div class="tarot-card-front"><span>üÇ†</span></div>
                            <div class="tarot-card-back">
                                <img src="" alt="L√° b√†i 3" id="card-img-2">
                            </div>
                        </div>
                    </div>
                </div>

                <div id="reset-button-container" class="mt-6 mb-4 hidden">
                    <button id="reset-cards-button" class="btn-action py-3 px-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-75">
                        H·ªèi L·ªùi S·∫•m Kh√°c
                    </button>
                </div>

                <div id="info-display-section" class="info-section-container text-left hidden">
                    <div id="original-meanings-container">
                        <p id="initial-info-message" class="text-amber-100 text-center text-lg">L·ªùi ti√™n tri ƒëang ch·ªù ƒë·ª£i... H√£y ch·ªçn m·ªôt l√° b√†i!</p>
                        <div id="card-info-0" class="mb-4 p-3 bg-black bg-opacity-30 rounded-md hidden">
                            <h3 id="card-name-0" class="card-info-title"></h3>
                            <p id="card-meaning-0" class="card-info-meaning"></p>
                        </div>
                        <div id="card-info-1" class="mb-4 p-3 bg-black bg-opacity-30 rounded-md hidden">
                            <h3 id="card-name-1" class="card-info-title"></h3>
                            <p id="card-meaning-1" class="card-info-meaning"></p>
                        </div>
                        <div id="card-info-2" class="p-3 bg-black bg-opacity-30 rounded-md hidden">
                            <h3 id="card-name-2" class="card-info-title"></h3>
                            <p id="card-meaning-2" class="card-info-meaning"></p>
                        </div>
                    </div>

                    <div id="ai-interpretation-container" class="ai-interpretation-container hidden">
                        <h2 class="ai-title">üìú L·ªùi Gi·∫£i T·ª´ V√¨ Sao üìú</h2>
                        <div id="ai-loading-indicator" class="loader hidden"></div>
                        <p id="ai-interpretation-text" class="ai-text"></p>
                    </div>
                </div>
            </div>
        </div>

        <div id="message-box" class="fixed top-5 right-5 bg-red-700 text-gray-100 p-4 rounded-lg shadow-xl hidden animate-pulse z-50">
            <p id="message-text"></p>
        </div>
    </div>

    <script>
        // DOM Elements
        const animatedBackground = document.getElementById('animated-background');
        const questionSectionWrapper = document.getElementById('question-section-wrapper');
        const tarotReadingSectionWrapper = document.getElementById('tarot-reading-section-wrapper');
        
        const userQuestionInput = document.getElementById('user-question-input');
        const submitQuestionButton = document.getElementById('submit-question-button');
        const displayUserQuestionElement = document.getElementById('display-user-question');

        const deckContainer = document.getElementById('deck-container');
        const deckPile = document.getElementById('deck-pile');
        const cardSlotsElements = [ // Assuming 3 cards are always drawn
            document.getElementById('card-slot-0'),
            document.getElementById('card-slot-1'),
            document.getElementById('card-slot-2')
        ];
        const cardInnerElements = document.querySelectorAll('#cards-display-area .tarot-card-inner');


        const cardImages = [ // For the 3 drawn cards
            document.getElementById('card-img-0'),
            document.getElementById('card-img-1'),
            document.getElementById('card-img-2')
        ];
        const cardInfoDivs = [
            document.getElementById('card-info-0'),
            document.getElementById('card-info-1'),
            document.getElementById('card-info-2')
        ];
        const cardNamesElements = [
            document.getElementById('card-name-0'),
            document.getElementById('card-name-1'),
            document.getElementById('card-name-2')
        ];
        const cardMeaningsElements = [
            document.getElementById('card-meaning-0'),
            document.getElementById('card-meaning-1'),
            document.getElementById('card-meaning-2')
        ];
        const initialInfoMessage = document.getElementById('initial-info-message');
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        const resetButtonContainer = document.getElementById('reset-button-container');
        const resetButton = document.getElementById('reset-cards-button');

        const infoDisplaySection = document.getElementById('info-display-section');
        const originalMeaningsContainer = document.getElementById('original-meanings-container');
        const aiInterpretationContainer = document.getElementById('ai-interpretation-container');
        const aiLoadingIndicator = document.getElementById('ai-loading-indicator');
        const aiInterpretationTextElement = document.getElementById('ai-interpretation-text');

        // === B·ªò B√ÄI TAROT 78 L√Å ƒê√É ƒê∆Ø·ª¢C C·∫¨P NH·∫¨T ===
        const tarotDeck = [
            // Major Arcana (22 l√°)
            { name: "0 - The Fool (Ch√†ng Kh·ªù)", nameParts: ["The Fool", "Ch√†ng Kh·ªù", "Fool"], meaning: "S·ª± kh·ªüi ƒë·∫ßu m·ªõi, ng√¢y th∆°, phi√™u l∆∞u, ti·ªÅm nƒÉng kh√¥ng gi·ªõi h·∫°n, s·ª± t·ª± ph√°t.", img: "https://i.postimg.cc/5ND6VgDK/643e305b9f205802596736.jpg" },
            { name: "I - The Magician (Ph√°p S∆∞)", nameParts: ["The Magician", "Ph√°p S∆∞", "Magician"], meaning: "S·ª©c m·∫°nh √Ω ch√≠, k·ªπ nƒÉng, h√†nh ƒë·ªông, t·∫≠p trung, bi·ªÉu hi·ªán, t√†i nguy√™n.", img: "https://i.postimg.cc/5NpW52SB/643f51cebd6fc372602918.jpg" },
            { name: "II - The High Priestess (N·ªØ Tu)", nameParts: ["The High Priestess", "N·ªØ Tu", "High Priestess"], meaning: "Tr·ª±c gi√°c, b√≠ ·∫©n, ti·ªÅm th·ª©c, tr√≠ tu·ªá n·ªôi t√¢m, s·ª± ki√™n nh·∫´n.", img: "https://i.postimg.cc/9XnGDGvZ/6440bfeb45daa924620828.jpg" },
            { name: "III - The Empress (N·ªØ Ho√†ng)", nameParts: ["The Empress", "N·ªØ Ho√†ng", "Empress"], meaning: "S·ª± nu√¥i d∆∞·ª°ng, phong ph√∫, n·ªØ t√≠nh, s√°ng t·∫°o, v·∫ª ƒë·∫πp t·ª± nhi√™n, s·ª± sinh s√¥i.", img: "https://i.postimg.cc/sxh4Jc8B/64421dc3642e5331994313.jpg" },
            { name: "IV - The Emperor (Ho√†ng ƒê·∫ø)", nameParts: ["The Emperor", "Ho√†ng ƒê·∫ø", "Emperor"], meaning: "Quy·ªÅn l·ª±c, c·∫•u tr√∫c, s·ª± ki·ªÉm so√°t, l√Ω tr√≠, ng∆∞·ªùi cha, s·ª± ·ªïn ƒë·ªãnh.", img: "https://i.postimg.cc/Nfb5zTcL/6440ca04423aa803088771.jpg" },
            { name: "V - The Hierophant (Th·∫ßy C·∫£)", nameParts: ["The Hierophant", "Th·∫ßy C·∫£", "Hierophant"], meaning: "Truy·ªÅn th·ªëng, ƒë·ª©c tin, gi√°o d·ª•c, h∆∞·ªõng d·∫´n tinh th·∫ßn, s·ª± tu√¢n th·ªß.", img: "https://i.postimg.cc/wjygQsxC/6442143cc6d12721675057.jpg" },
            { name: "VI - The Lovers (Ng∆∞·ªùi Y√™u)", nameParts: ["The Lovers", "Ng∆∞·ªùi Y√™u", "Lovers"], meaning: "T√¨nh y√™u, m·ªëi quan h·ªá, s·ª± l·ª±a ch·ªçn, s·ª± h√≤a h·ª£p, gi√° tr·ªã, s·ª± li√™n k·∫øt.", img: "https://i.postimg.cc/hG4F3zK4/643f75de5fa42187988494.jpg" },
            { name: "VII - The Chariot (C·ªó Xe)", nameParts: ["The Chariot", "C·ªó Xe", "Chariot"], meaning: "√ù ch√≠, quy·∫øt t√¢m, chi·∫øn th·∫Øng, s·ª± ki·ªÉm so√°t, ti·∫øn v·ªÅ ph√≠a tr∆∞·ªõc, s·ª± t·ª± tin.", img: "https://i.postimg.cc/j2PkjtRk/64466e1bb9588170152785.jpg" },
            { name: "VIII - Strength (S·ª©c M·∫°nh)", nameParts: ["Strength", "S·ª©c M·∫°nh"], meaning: "S·ª©c m·∫°nh n·ªôi t√¢m, l√≤ng d≈©ng c·∫£m, s·ª± ki√™n nh·∫´n, ki·ªÉm so√°t b·∫£n nƒÉng, l√≤ng tr·∫Øc ·∫©n.", img: "https://i.postimg.cc/mg2VvQ1n/6446754309a08059278429.jpg" },
            { name: "IX - The Hermit (·∫®n Sƒ©)", nameParts: ["The Hermit", "·∫®n Sƒ©", "Hermit"], meaning: "S·ª± suy ng·∫´m, c√¥ t·ªãch, t√¨m ki·∫øm n·ªôi t√¢m, tr√≠ tu·ªá, h∆∞·ªõng d·∫´n, s·ª± t·ª± gi√°c.", img: "https://i.postimg.cc/4xmVvw9X/644776cd15b36247793217.jpg" },
            { name: "X - Wheel of Fortune (B√°nh Xe S·ªë Ph·∫≠n)", nameParts: ["Wheel of Fortune", "B√°nh Xe S·ªë Ph·∫≠n", "Wheel"], meaning: "Chu k·ª≥, s·ªë ph·∫≠n, s·ª± thay ƒë·ªïi, may m·∫Øn, b∆∞·ªõc ngo·∫∑t, c∆° h·ªôi.", img: "https://i.postimg.cc/qRjv5VPS/6448a1d65ca2c307025465.jpg" },
            { name: "XI - Justice (C√¥ng L√Ω)", nameParts: ["Justice", "C√¥ng L√Ω"], meaning: "S·ª± th·∫≠t, c√¥ng b·∫±ng, lu·∫≠t nh√¢n qu·∫£, tr√°ch nhi·ªám, s·ª± r√µ r√†ng, quy·∫øt ƒë·ªãnh.", img: "https://i.postimg.cc/J7ss2thQ/64477df6d145b114005354.jpg" },
            { name: "XII - The Hanged Man (Ng∆∞·ªùi Treo Ng∆∞·ª£c)", nameParts: ["The Hanged Man", "Ng∆∞·ªùi Treo Ng∆∞·ª£c", "Hanged Man"], meaning: "S·ª± hy sinh, g√≥c nh√¨n m·ªõi, bu√¥ng b·ªè, ƒë√¨nh ch·ªâ, s·ª± ki√™n nh·∫´n.", img: "https://i.postimg.cc/pXV6vNgk/6448ab982e324297578895.jpg" },
            { name: "XIII - Death (C√°i Ch·∫øt)", nameParts: ["Death", "C√°i Ch·∫øt"], meaning: "S·ª± k·∫øt th√∫c, chuy·ªÉn ƒë·ªïi, t√°i sinh.", img: "https://i.postimg.cc/g0pR9p72/6449de96464fc931611065.jpg" },
            { name: "XIV - Temperance (S·ª± Ti·∫øt Ch·∫ø)", nameParts: ["Temperance", "S·ª± Ti·∫øt Ch·∫ø"], meaning: "S·ª± c√¢n b·∫±ng, ƒëi·ªÅu ƒë·ªô, h√≤a h·ª£p.", img: "https://i.postimg.cc/jS46SCP7/644a8f06a2a97262712511.jpg" },
            { name: "XV - The Devil (√Åc Qu·ª∑)", nameParts: ["The Devil", "√Åc Qu·ª∑", "Devil"], meaning: "S·ª± r√†ng bu·ªôc, c√°m d·ªó, nghi·ªán ng·∫≠p.", img: "https://i.postimg.cc/L6Bgzw5d/644b42ed90c7e737329635.jpg" },
            { name: "XVI - The Tower (Ng·ªçn Th√°p)", nameParts: ["The Tower", "Ng·ªçn Th√°p", "Tower"], meaning: "S·ª± thay ƒë·ªïi ƒë·ªôt ng·ªôt, bi·∫øn ƒë·ªông.", img: "https://i.postimg.cc/qMjMBTg7/644b642cce4fe891891452.jpg" },
            { name: "XVII - The Star (Ng√¥i Sao)", nameParts: ["The Star", "Ng√¥i Sao", "Star"], meaning: "Hy v·ªçng, c·∫£m h·ª©ng, ni·ªÅm tin.", img: "https://i.postimg.cc/vHcHmKnL/6450948daadbc805081217.jpg" },
            { name: "XVIII - The Moon (M·∫∑t TrƒÉng)", nameParts: ["The Moon", "M·∫∑t TrƒÉng", "Moon"], meaning: "Tr·ª±c gi√°c, ·∫£o ·∫£nh, n·ªói s·ª£.", img: "https://i.postimg.cc/fbKJd9Rx/6450a08c8eb21261517572.jpg" },
            { name: "XIX - The Sun (M·∫∑t Tr·ªùi)", nameParts: ["The Sun", "M·∫∑t Tr·ªùi", "Sun"], meaning: "Ni·ªÅm vui, th√†nh c√¥ng, s·ª± r√µ r√†ng.", img: "https://i.postimg.cc/Kv0btDPc/642c49cb896c6121395135.png" },
            { name: "XX - Judgement (S·ª± Ph√°n X√©t)", nameParts: ["Judgement", "S·ª± Ph√°n X√©t"], meaning: "S·ª± ph√°n x√©t, s·ª± th·ª©c t·ªânh, s·ª± tha th·ª©.", img: "https://i.postimg.cc/k5bDjpsv/642c49bf40ad6363634537.png" },
            { name: "XXI - The World (Th·∫ø Gi·ªõi)", nameParts: ["The World", "Th·∫ø Gi·ªõi", "World"], meaning: "S·ª± ho√†n th√†nh, th√†nh t·ª±u, tr·ªçn v·∫πn.", img: "https://i.postimg.cc/k5bDjpsv/642c49bf40ad6363634537.png" },
            // Wands
            { name: "Ace of Wands (L√° √Åt G·∫≠y)", nameParts: ["Ace of Wands", "L√° √Åt G·∫≠y", "Ace G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Ace of Wands (L√° √Åt G·∫≠y)...", img: "https://i.postimg.cc/QCHMTYF7/64533d0cb2fa3147679879.jpg" },
            { name: "Two of Wands (L√° Hai G·∫≠y)", nameParts: ["Two of Wands", "L√° Hai G·∫≠y", "Hai G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Two of Wands (L√° Hai G·∫≠y)...", img: "https://i.postimg.cc/nL27K5hS/645349499e4af539830675.jpg" },
            { name: "Three of Wands (L√° Ba G·∫≠y)", nameParts: ["Three of Wands", "L√° Ba G·∫≠y", "Ba G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Three of Wands (L√° Ba G·∫≠y)...", img: "https://i.postimg.cc/WzNNvNLT/64534e40674ee799214954.jpg" },
            { name: "Four of Wands (L√° B·ªën G·∫≠y)", nameParts: ["Four of Wands", "L√° B·ªën G·∫≠y", "B·ªën G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Four of Wands (L√° B·ªën G·∫≠y)...", img: "https://i.postimg.cc/Pq50TCN6/64547b3fa5a62553464962.jpg" },
            { name: "Five of Wands (L√° NƒÉm G·∫≠y)", nameParts: ["Five of Wands", "L√° NƒÉm G·∫≠y", "NƒÉm G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Five of Wands (L√° NƒÉm G·∫≠y)...", img: "https://i.postimg.cc/prWF6Msn/64548481ba0db479736072.jpg" },
            { name: "Six of Wands (L√° S√°u G·∫≠y)", nameParts: ["Six of Wands", "L√° S√°u G·∫≠y", "S√°u G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Six of Wands (L√° S√°u G·∫≠y)...", img: "https://i.postimg.cc/m2GLRS48/64588f68483bc136716201.jpg" },
            { name: "Seven of Wands (L√° B·∫£y G·∫≠y)", nameParts: ["Seven of Wands", "L√° B·∫£y G·∫≠y", "B·∫£y G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Seven of Wands (L√° B·∫£y G·∫≠y)...", img: "https://i.postimg.cc/ryZ1PKLV/6461a7d1117b7390497151.jpg" },
            { name: "Eight of Wands (L√° T√°m G·∫≠y)", nameParts: ["Eight of Wands", "L√° T√°m G·∫≠y", "T√°m G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Eight of Wands (L√° T√°m G·∫≠y)...", img: "https://i.postimg.cc/BQWT0Rtk/64631c01a443e842634790.jpg" },
            { name: "Nine of Wands (L√° Ch√≠n G·∫≠y)", nameParts: ["Nine of Wands", "L√° Ch√≠n G·∫≠y", "Ch√≠n G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Nine of Wands (L√° Ch√≠n G·∫≠y)...", img: "https://i.postimg.cc/HsspVkJy/6463230887213433942331.jpg" },
            { name: "Ten of Wands (L√° M∆∞·ªùi G·∫≠y)", nameParts: ["Ten of Wands", "L√° M∆∞·ªùi G·∫≠y", "M∆∞·ªùi G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Ten of Wands (L√° M∆∞·ªùi G·∫≠y)...", img: "https://i.postimg.cc/vHL3SGX3/6464503598553047849350.jpg" },
            { name: "Page of Wands (Ti·ªÉu ƒê·ªìng G·∫≠y)", nameParts: ["Page of Wands", "Ti·ªÉu ƒê·ªìng G·∫≠y", "Page G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Page of Wands (Ti·ªÉu ƒê·ªìng G·∫≠y)...", img: "https://i.postimg.cc/xjb0m4g0/64645ee4061dd483664625.jpg" },
            { name: "Knight of Wands (Hi·ªáp Sƒ© G·∫≠y)", nameParts: ["Knight of Wands", "Hi·ªáp Sƒ© G·∫≠y", "Knight G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Knight of Wands (Hi·ªáp Sƒ© G·∫≠y)...", img: "https://i.postimg.cc/qv6XH0xP/64659fc970c60923004950.jpg" },
            { name: "Queen of Wands (N·ªØ Ho√†ng G·∫≠y)", nameParts: ["Queen of Wands", "N·ªØ Ho√†ng G·∫≠y", "Queen G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa Queen of Wands (N·ªØ Ho√†ng G·∫≠y)...", img: "https://i.postimg.cc/wTLLwFxz/6465a74ad7491577117984.jpg" },
            { name: "King of Wands (Vua G·∫≠y)", nameParts: ["King of Wands", "Vua G·∫≠y", "King G·∫≠y"], meaning: "√ù nghƒ©a c·ªßa King of Wands (Vua G·∫≠y)...", img: "https://i.postimg.cc/QxdZbYJ9/6466ed9deb5e8447525978.jpg" },
            // Cups
            { name: "Ace of Cups (L√° √Åt C·ªëc)", nameParts: ["Ace of Cups", "L√° √Åt C·ªëc", "Ace C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Ace of Cups (L√° √Åt C·ªëc)...", img: "https://i.postimg.cc/J79dyTdC/6466f735f21df317422034.jpg" },
            { name: "Two of Cups (L√° Hai C·ªëc)", nameParts: ["Two of Cups", "L√° Hai C·ªëc", "Hai C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Two of Cups (L√° Hai C·ªëc)...", img: "https://i.postimg.cc/02KRFMhP/646ae1529d382609319839.jpg" },
            { name: "Three of Cups (L√° Ba C·ªëc)", nameParts: ["Three of Cups", "L√° Ba C·ªëc", "Ba C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Three of Cups (L√° Ba C·ªëc)...", img: "https://i.postimg.cc/1zwDjHrw/646ae7d0c7f9c393213043.jpg" },
            { name: "Four of Cups (L√° B·ªën C·ªëc)", nameParts: ["Four of Cups", "L√° B·ªën C·ªëc", "B·ªën C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Four of Cups (L√° B·ªën C·ªëc)...", img: "https://i.postimg.cc/vHGMgHKs/646c3871b0cff656573075.jpg" },
            { name: "Five of Cups (L√° NƒÉm C·ªëc)", nameParts: ["Five of Cups", "L√° NƒÉm C·ªëc", "NƒÉm C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Five of Cups (L√° NƒÉm C·ªëc)...", img: "https://i.postimg.cc/vmsvMkB3/646c3f88a56de222861616.jpg" },
            { name: "Six of Cups (L√° S√°u C·ªëc)", nameParts: ["Six of Cups", "L√° S√°u C·ªëc", "S√°u C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Six of Cups (L√° S√°u C·ªëc)...", img: "https://i.postimg.cc/6qvcLvpp/646d96da452e1840500992.jpg" },
            { name: "Seven of Cups (L√° B·∫£y C·ªëc)", nameParts: ["Seven of Cups", "L√° B·∫£y C·ªëc", "B·∫£y C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Seven of Cups (L√° B·∫£y C·ªëc)...", img: "https://i.postimg.cc/nV2hpPFT/646d9b70c074f896673784.jpg" },
            { name: "Eight of Cups (L√° T√°m C·ªëc)", nameParts: ["Eight of Cups", "L√° T√°m C·ªëc", "T√°m C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Eight of Cups (L√° T√°m C·ªëc)...", img: "https://i.postimg.cc/tT5n0RvN/646ed9519c178522107302.jpg" },
            { name: "Nine of Cups (L√° Ch√≠n C·ªëc)", nameParts: ["Nine of Cups", "L√° Ch√≠n C·ªëc", "Ch√≠n C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Nine of Cups (L√° Ch√≠n C·ªëc)...", img: "https://i.postimg.cc/P55jKX1k/646edc0b30243070776066.jpg" },
            { name: "Ten of Cups (L√° M∆∞·ªùi C·ªëc)", nameParts: ["Ten of Cups", "L√° M∆∞·ªùi C·ªëc", "M∆∞·ªùi C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Ten of Cups (L√° M∆∞·ªùi C·ªëc)...", img: "https://i.postimg.cc/FKGk8sBg/64702aeda5068499557917.jpg" },
            { name: "Page of Cups (Ti·ªÉu ƒê·ªìng C·ªëc)", nameParts: ["Page of Cups", "Ti·ªÉu ƒê·ªìng C·ªëc", "Page C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Page of Cups (Ti·ªÉu ƒê·ªìng C·ªëc)...", img: "https://i.postimg.cc/TYR1MXnt/6470374da5857406158745.jpg" },
            { name: "Knight of Cups (Hi·ªáp Sƒ© C·ªëc)", nameParts: ["Knight of Cups", "Hi·ªáp Sƒ© C·ªëc", "Knight C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Knight of Cups (Hi·ªáp Sƒ© C·ªëc)...", img: "https://i.postimg.cc/6pJH5Y5b/647576a407b35333424108.jpg" },
            { name: "Queen of Cups (N·ªØ Ho√†ng C·ªëc)", nameParts: ["Queen of Cups", "N·ªØ Ho√†ng C·ªëc", "Queen C·ªëc"], meaning: "√ù nghƒ©a c·ªßa Queen of Cups (N·ªØ Ho√†ng C·ªëc)...", img: "https://i.postimg.cc/jj9cmX9h/647419538612a830624455.jpg" },
            { name: "King of Cups (Vua C·ªëc)", nameParts: ["King of Cups", "Vua C·ªëc", "King C·ªëc"], meaning: "√ù nghƒ©a c·ªßa King of Cups (Vua C·ªëc)...", img: "https://i.postimg.cc/50VYXQFV/64741e18bffd6700920912.jpg" },
            // Swords
            { name: "Ace of Swords (L√° √Åt Ki·∫øm)", nameParts: ["Ace of Swords", "L√° √Åt Ki·∫øm", "Ace Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Ace of Swords (L√° √Åt Ki·∫øm)...", img: "https://i.postimg.cc/KvM2HqH0/64757c13ea8b6430239601.jpg" },
            { name: "Two of Swords (L√° Hai Ki·∫øm)", nameParts: ["Two of Swords", "L√° Hai Ki·∫øm", "Hai Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Two of Swords (L√° Hai Ki·∫øm)...", img: "https://i.postimg.cc/pLc3VK4m/6476b134a58ac471526192.jpg" },
            { name: "Three of Swords (L√° Ba Ki·∫øm)", nameParts: ["Three of Swords", "L√° Ba Ki·∫øm", "Ba Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Three of Swords (L√° Ba Ki·∫øm)...", img: "https://i.postimg.cc/1XN3M9FH/6476b86b15021147126986.jpg" },
            { name: "Four of Swords (L√° B·ªën Ki·∫øm)", nameParts: ["Four of Swords", "L√° B·ªën Ki·∫øm", "B·ªën Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Four of Swords (L√° B·ªën Ki·∫øm)...", img: "https://i.postimg.cc/cHBpSPSS/64780715c9e4d018768073.jpg" },
            { name: "Five of Swords (L√° NƒÉm Ki·∫øm)", nameParts: ["Five of Swords", "L√° NƒÉm Ki·∫øm", "NƒÉm Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Five of Swords (L√° NƒÉm Ki·∫øm)...", img: "https://i.postimg.cc/VLmjvpPh/6478110110631060190541.jpg" },
            { name: "Six of Swords (L√° S√°u Ki·∫øm)", nameParts: ["Six of Swords", "L√° S√°u Ki·∫øm", "S√°u Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Six of Swords (L√° S√°u Ki·∫øm)...", img: "https://i.postimg.cc/rmGNYkLS/64795b7b022cf180593074.jpg" },
            { name: "Seven of Swords (L√° B·∫£y Ki·∫øm)", nameParts: ["Seven of Swords", "L√° B·∫£y Ki·∫øm", "B·∫£y Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Seven of Swords (L√° B·∫£y Ki·∫øm)...", img: "https://i.postimg.cc/vZWTnH7L/64796296d6b73591782131.jpg" },
            { name: "Eight of Swords (L√° T√°m Ki·∫øm)", nameParts: ["Eight of Swords", "L√° T√°m Ki·∫øm", "T√°m Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Eight of Swords (L√° T√°m Ki·∫øm)...", img: "https://i.postimg.cc/bJfKtpTb/647d5fe81931e198509881.jpg" },
            { name: "Nine of Swords (L√° Ch√≠n Ki·∫øm)", nameParts: ["Nine of Swords", "L√° Ch√≠n Ki·∫øm", "Ch√≠n Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Nine of Swords (L√° Ch√≠n Ki·∫øm)...", img: "https://i.postimg.cc/WtcFRD6z/647d644558d7b273724869.jpg" },
            { name: "Ten of Swords (L√° M∆∞·ªùi Ki·∫øm)", nameParts: ["Ten of Swords", "L√° M∆∞·ªùi Ki·∫øm", "M∆∞·ªùi Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Ten of Swords (L√° M∆∞·ªùi Ki·∫øm)...", img: "https://i.postimg.cc/gJ9x5Syd/647e9e2c3d8c7503771663.jpg" },
            { name: "Page of Swords (Ti·ªÉu ƒê·ªìng Ki·∫øm)", nameParts: ["Page of Swords", "Ti·ªÉu ƒê·ªìng Ki·∫øm", "Page Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Page of Swords (Ti·ªÉu ƒê·ªìng Ki·∫øm)...", img: "https://i.postimg.cc/HnNDZK59/64814fd21b2d5295209893.jpg" },
            { name: "Knight of Swords (Hi·ªáp Sƒ© Ki·∫øm)", nameParts: ["Knight of Swords", "Hi·ªáp Sƒ© Ki·∫øm", "Knight Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Knight of Swords (Hi·ªáp Sƒ© Ki·∫øm)...", img: "https://i.postimg.cc/jdzYQ82P/647ea7dda48f2377264917.jpg" },
            { name: "Queen of Swords (N·ªØ Ho√†ng Ki·∫øm)", nameParts: ["Queen of Swords", "N·ªØ Ho√†ng Ki·∫øm", "Queen Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa Queen of Swords (N·ªØ Ho√†ng Ki·∫øm)...", img: "https://i.postimg.cc/qMH9R8wR/6480010eb4dc1449235090.jpg" },
            { name: "King of Swords (Vua Ki·∫øm)", nameParts: ["King of Swords", "Vua Ki·∫øm", "King Ki·∫øm"], meaning: "√ù nghƒ©a c·ªßa King of Swords (Vua Ki·∫øm)...", img: "https://i.postimg.cc/B6Dm9VdC/648006365a61f958760163.jpg" },
            // Pentacles
            { name: "Ace of Pentacles (L√° √Åt Ti·ªÅn)", nameParts: ["Ace of Pentacles", "L√° √Åt Ti·ªÅn", "Ace Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Ace of Pentacles (L√° √Åt Ti·ªÅn)...", img: "https://i.postimg.cc/Qx6kPDF3/64815a1c931ed823839842.jpg" },
            { name: "Two of Pentacles (L√° Hai Ti·ªÅn)", nameParts: ["Two of Pentacles", "L√° Hai Ti·ªÅn", "Hai Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Two of Pentacles (L√° Hai Ti·ªÅn)...", img: "https://i.postimg.cc/ncsCFfdZ/6482870e86928273770871.jpg" },
            { name: "Three of Pentacles (L√° Ba Ti·ªÅn)", nameParts: ["Three of Pentacles", "L√° Ba Ti·ªÅn", "Ba Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Three of Pentacles (L√° Ba Ti·ªÅn)...", img: "https://i.postimg.cc/q7BtdhSD/648294ce0e9f2400968374.jpg" },
            { name: "Four of Pentacles (L√° B·ªën Ti·ªÅn)", nameParts: ["Four of Pentacles", "L√° B·ªën Ti·ªÅn", "B·ªën Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Four of Pentacles (L√° B·ªën Ti·ªÅn)...", img: "https://i.postimg.cc/Bbf44RtZ/64a2392a4e976747541841.jpg" },
            { name: "Five of Pentacles (L√° NƒÉm Ti·ªÅn)", nameParts: ["Five of Pentacles", "L√° NƒÉm Ti·ªÅn", "NƒÉm Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Five of Pentacles (L√° NƒÉm Ti·ªÅn)...", img: "https://i.postimg.cc/3w0sN9sk/64a244a218013729997109.jpg" },
            { name: "Six of Pentacles (L√° S√°u Ti·ªÅn)", nameParts: ["Six of Pentacles", "L√° S√°u Ti·ªÅn", "S√°u Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Six of Pentacles (L√° S√°u Ti·ªÅn)...", img: "https://i.postimg.cc/JhCq3qyD/64a3890bd055c236176276.jpg" },
            { name: "Seven of Pentacles (L√° B·∫£y Ti·ªÅn)", nameParts: ["Seven of Pentacles", "L√° B·∫£y Ti·ªÅn", "B·∫£y Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Seven of Pentacles (L√° B·∫£y Ti·ªÅn)...", img: "https://i.postimg.cc/FsJ3PSXj/64a393cd5db01116454428.jpg" },
            { name: "Eight of Pentacles (L√° T√°m Ti·ªÅn)", nameParts: ["Eight of Pentacles", "L√° T√°m Ti·ªÅn", "T√°m Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Eight of Pentacles (L√° T√°m Ti·ªÅn)...", img: "https://i.postimg.cc/FRd32kJ5/64a4ee1fe4fc2685238165.jpg" },
            { name: "Nine of Pentacles (L√° Ch√≠n Ti·ªÅn)", nameParts: ["Nine of Pentacles", "L√° Ch√≠n Ti·ªÅn", "Ch√≠n Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Nine of Pentacles (L√° Ch√≠n Ti·ªÅn)...", img: "https://i.postimg.cc/rmxz11rm/64a4f4bfe4079342438474.jpg" },
            { name: "Ten of Pentacles (L√° M∆∞·ªùi Ti·ªÅn)", nameParts: ["Ten of Pentacles", "L√° M∆∞·ªùi Ti·ªÅn", "M∆∞·ªùi Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Ten of Pentacles (L√° M∆∞·ªùi Ti·ªÅn)...", img: "https://i.postimg.cc/52X455cV/64a6c5b4c60e7139127123.jpg" },
            { name: "Page of Pentacles (Ti·ªÉu ƒê·ªìng Ti·ªÅn)", nameParts: ["Page of Pentacles", "Ti·ªÉu ƒê·ªìng Ti·ªÅn", "Page Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Page of Pentacles (Ti·ªÉu ƒê·ªìng Ti·ªÅn)...", img: "https://i.postimg.cc/nLvtT006/64a7c6870f965561345076.jpg" },
            { name: "Knight of Pentacles (Hi·ªáp Sƒ© Ti·ªÅn)", nameParts: ["Knight of Pentacles", "Hi·ªáp Sƒ© Ti·ªÅn", "Knight Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Knight of Pentacles (Hi·ªáp Sƒ© Ti·ªÅn)...", img: "https://i.postimg.cc/MZ3g7Czn/64a7cb5e007b1621460798.jpg" },
            { name: "Queen of Pentacles (N·ªØ Ho√†ng Ti·ªÅn)", nameParts: ["Queen of Pentacles", "N·ªØ Ho√†ng Ti·ªÅn", "Queen Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa Queen of Pentacles (N·ªØ Ho√†ng Ti·ªÅn)...", img: "https://i.postimg.cc/yx3jXrTR/64a7fd3eea247722329088.jpg" },
            { name: "King of Pentacles (Vua Ti·ªÅn)", nameParts: ["King of Pentacles", "Vua Ti·ªÅn", "King Ti·ªÅn"], meaning: "√ù nghƒ©a c·ªßa King of Pentacles (Vua Ti·ªÅn)...", img: "https://i.postimg.cc/Z5HQq2sY/64a80945cad7f503593705.jpg" }
        ];


        let revealedCount = 0;
        let availableCards = [];
        let drawnCardsData = [];
        let currentUserQuestion = "";
        let isDealing = false;

        function showMessage(message, duration = 3000) {
            messageText.textContent = message;
            messageBox.classList.remove('hidden');
            setTimeout(() => { messageBox.classList.add('hidden'); }, duration);
        }

        function enableResetButton() { resetButtonContainer.classList.remove('hidden'); }
        function disableResetButton() { resetButtonContainer.classList.add('hidden'); }
        function escapeRegExp(string) { return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }

        function createFireflies(count) {
            // Clear existing fireflies before creating new ones if this function can be called multiple times
            // animatedBackground.innerHTML = ''; // Uncomment if needed
            for (let i = 0; i < count; i++) {
                const firefly = document.createElement('div');
                firefly.classList.add('firefly');
                firefly.style.top = `${Math.random() * 100}%`;
                firefly.style.left = `${Math.random() * 100}%`;
                firefly.style.animationDelay = `${Math.random() * 5}s`;
                firefly.style.animationDuration = `${8 + Math.random() * 7}s`;
                if (Math.random() > 0.6) {
                    const size = `${2 + Math.random() * 2}px`;
                    firefly.style.width = size;
                    firefly.style.height = size;
                }
                animatedBackground.appendChild(firefly);
            }
        }

        function createDeckVisual() {
            deckPile.innerHTML = ''; // Clear previous deck visuals
            for (let i = 0; i < 5; i++) { // Show a small stack for visual effect
                const cardEl = document.createElement('div');
                cardEl.classList.add('card-base');
                cardEl.style.bottom = `${i * 2}px`; // Stacking effect
                cardEl.style.left = `${i * 1}px`;
                cardEl.style.transform = `rotate(${Math.random() * 4 - 2}deg)`; // Slight random rotation
                cardEl.textContent = 'üÇ†'; // Card back symbol
                deckPile.appendChild(cardEl);
            }
        }

        async function shuffleAndDeal() {
            isDealing = true;
            deckContainer.classList.remove('hidden');
            deckPile.classList.add('shuffling');
            deckContainer.querySelector('p').textContent = "ƒêang x√†o b√†i...";
            
            await new Promise(resolve => setTimeout(resolve, 1500)); // Shuffling animation time
            deckPile.classList.remove('shuffling');
            deckContainer.querySelector('p').textContent = "ƒêang chia b√†i...";

            drawnCardsData = [];
            availableCards = [...tarotDeck]; // Use the full 78-card deck

            for (let i = 0; i < 3; i++) { // Draw 3 cards
                if (availableCards.length === 0) {
                    showMessage("Kh√¥ng ƒë·ªß b√†i ƒë·ªÉ r√∫t!", 4000);
                    break;
                }

                const randomIndex = Math.floor(Math.random() * availableCards.length);
                const selectedCardData = availableCards.splice(randomIndex, 1)[0];
                
                const cardInnerEl = cardInnerElements[i];
                const cardSlotEl = cardSlotsElements[i];
                const cardImgEl = cardInnerEl.querySelector('.tarot-card-back img');
                const cardFrontSymbolEl = cardInnerEl.querySelector('.tarot-card-front span');

                drawnCardsData.push({ data: selectedCardData, element: cardInnerEl, slot: cardSlotEl });

                // Reset card face for dealing animation
                cardFrontSymbolEl.textContent = 'ÔøΩ';
                cardImgEl.src = ""; // Clear previous image
                cardImgEl.alt = selectedCardData.name; // Set alt text for accessibility
                
                // Create a temporary card for dealing animation from deck to slot
                const movingCard = document.createElement('div');
                movingCard.classList.add('card-base');
                movingCard.textContent = 'üÇ†';
                movingCard.style.position = 'fixed'; // Use fixed for viewport-relative positioning
                const deckRect = deckPile.getBoundingClientRect();
                movingCard.style.left = `${deckRect.left + window.scrollX}px`;
                movingCard.style.top = `${deckRect.top + window.scrollY}px`;
                document.body.appendChild(movingCard);

                await new Promise(resolve => setTimeout(resolve, 200)); // Short delay before moving

                const slotRect = cardSlotEl.getBoundingClientRect();
                movingCard.style.transition = 'transform 0.5s ease-in-out, opacity 0.5s ease-in-out';
                movingCard.style.transform = `translate(${slotRect.left + window.scrollX - deckRect.left}px, ${slotRect.top + window.scrollY - deckRect.top}px) rotateY(0deg)`;
                movingCard.style.opacity = '1';

                await new Promise(resolve => setTimeout(resolve, 500)); // Wait for animation to complete
                
                document.body.removeChild(movingCard); // Remove animated card
                cardInnerEl.classList.add('dealt'); // Make the actual card in slot visible
            }
            deckContainer.classList.add('hidden'); // Hide deck after dealing
            initialInfoMessage.classList.remove('hidden');
            infoDisplaySection.classList.remove('hidden');
            isDealing = false;
        }


        async function getAIInterpretation(cardsInfo, userQuestion) {
            aiInterpretationContainer.classList.remove('hidden');
            aiLoadingIndicator.classList.remove('hidden');
            aiInterpretationTextElement.innerHTML = ''; // Clear previous interpretation
            const cardFullNames = cardsInfo.map(ci => ci.data.name);

            const prompt = `B·∫°n l√† m·ªôt ng∆∞·ªùi ƒë·ªçc b√†i Tarot uy√™n b√°c v√† huy·ªÅn b√≠, mang gi·ªçng vƒÉn c·ªï x∆∞a nh∆∞ m·ªôt nh√† ti√™n tri. Ng∆∞·ªùi t√¨m ki·∫øm c√≥ m·ªôt th·∫Øc m·∫Øc: "${userQuestion}". H·ªç ƒë√£ r√∫t ƒë∆∞·ª£c 3 l√° b√†i thi√™ng: ${cardFullNames.join(', ')}. D·ª±a tr√™n s·ª± th√¥ng tu·ªá Tarot c·ªßa b·∫°n, h√£y v√©n m√†n b√≠ m·∫≠t, gi·∫£i th√≠ch √Ω nghƒ©a t·ªïng h·ª£p c·ªßa 3 l√° b√†i n√†y trong m·ªëi li√™n h·ªá v·ªõi c√¢u h·ªèi c·ªßa h·ªç. H√£y ƒë∆∞a ra m·ªôt l·ªùi s·∫•m truy·ªÅn chi ti·∫øt, s√¢u s·∫Øc v√† mang t√≠nh ch·ªâ d·∫´n. Trong l·ªùi ti√™n tri c·ªßa b·∫°n, h√£y nh·∫•n m·∫°nh nh·ªØng t·ª´ kh√≥a ho·∫∑c kh√°i ni·ªám Tarot quan tr·ªçng b·∫±ng c√°ch ƒë·∫∑t ch√∫ng trong d·∫•u hai hoa th·ªã (v√≠ d·ª•: **v·∫≠n m·ªánh** ho·∫∑c **kh·ªüi ƒë·∫ßu m·ªõi**).`;
            let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };
            
            // QUAN TR·ªåNG: API Key n√†y ƒë√£ ƒë∆∞·ª£c chia s·∫ª. H√£y thay th·∫ø b·∫±ng API Key m·ªõi v√† an to√†n c·ªßa b·∫°n!
            const apiKey = "AIzaSyBH-XIIw5BomTJtB6JrC87t5-Sz5SKy-Bw"; 
            
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) {
                    const errorData = await response.json(); 
                    console.error("API Error Data:", errorData); // Log detailed error
                    throw new Error(`L·ªói t·ª´ c√°c v√¨ sao: ${errorData.error?.message || response.statusText}`);
                }
                const result = await response.json();
                let rawText = "";
                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
                    rawText = result.candidates[0].content.parts[0].text;
                } else { 
                    console.error("Unexpected API response structure:", result);
                    throw new Error("Kh√¥ng nh·∫≠n ƒë∆∞·ª£c l·ªùi s·∫•m truy·ªÅn h·ª£p l·ªá t·ª´ c√°c v√¨ sao."); 
                }

                // Process text for display (bold, italics, and card name highlighting)
                let processedText = rawText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\*(.*?)\*/g, '<em>$1</em>');
                const allNameParts = cardsInfo.flatMap(ci => ci.data.nameParts).sort((a, b) => b.length - a.length); // Sort by length to match longer names first
                let tempText = processedText;
                [...new Set(allNameParts)].forEach(part => { // Use Set to avoid duplicate replacements
                    tempText = tempText.replace(new RegExp(`\\b${escapeRegExp(part)}\\b`, 'gi'), (match) => `<span class="highlighted-card-name">${match}</span>`);
                });
                aiInterpretationTextElement.innerHTML = tempText;
            } catch (error) {
                console.error("L·ªói khi gi·∫£i l·ªùi s·∫•m:", error);
                aiInterpretationTextElement.innerHTML = `R·∫•t ti·∫øc, c√°c v√¨ sao ch∆∞a th·ªÉ h·ªìi ƒë√°p: ${error.message}. Xin h√£y th·ª≠ l·∫°i sau.`;
                showMessage(`L·ªói s·∫•m truy·ªÅn: ${error.message}`, 5000);
            } finally {
                aiLoadingIndicator.classList.add('hidden');
            }
        }

        function resetIndividualCardSlot(index) {
            const cardInnerEl = cardInnerElements[index];
            const cardSlotEl = cardSlotsElements[index]; // Ensure this is the slot, not the inner part
            cardInnerEl.classList.remove('flipped', 'dealt');
            cardInnerEl.style.transform = ''; // Reset any transform from flip
            cardSlotEl.classList.remove('flipped'); // Also reset flipped class on the slot if it was added there
            
            const imgEl = cardInnerEl.querySelector('.tarot-card-back img');
            imgEl.src = ""; // Clear image
            imgEl.alt = `L√° b√†i ${index + 1}`;
            const cardFrontSymbolEl = cardInnerEl.querySelector('.tarot-card-front span');
            cardFrontSymbolEl.textContent = 'üÇ†'; // Reset to card back symbol

            // Hide card info
            cardInfoDivs[index].classList.add('hidden');
            cardNamesElements[index].textContent = '';
            cardMeaningsElements[index].textContent = '';
        }

        function resetTarotReadingView() {
            cardInnerElements.forEach((el, index) => resetIndividualCardSlot(index));
            initialInfoMessage.classList.remove('hidden'); // Show initial message
            infoDisplaySection.classList.add('hidden'); // Hide detailed info section
            aiInterpretationContainer.classList.add('hidden');
            aiInterpretationTextElement.innerHTML = '';
            aiLoadingIndicator.classList.add('hidden');
            disableResetButton();
            revealedCount = 0;
            drawnCardsData = []; // Clear data of drawn cards
        }
        
        function showSection(sectionToShow, sectionToHide) {
            sectionToHide.classList.remove('section-visible-state');
            sectionToHide.classList.add('section-hidden-state');
            setTimeout(() => {
                sectionToHide.classList.add('hidden'); // Fully hide after transition
                sectionToShow.classList.remove('hidden'); // Make visible before transition
                requestAnimationFrame(() => { // Ensure DOM is updated before adding class for transition
                    sectionToShow.classList.remove('section-hidden-state');
                    sectionToShow.classList.add('section-visible-state');
                });
            }, 700); // Match transition duration
        }

        function initializeNewReadingSession() {
            resetTarotReadingView();
            availableCards = [...tarotDeck]; // Reset available cards to full deck
            // Ensure question section is visible and tarot reading section is hidden
            questionSectionWrapper.classList.remove('hidden', 'section-hidden-state');
            questionSectionWrapper.classList.add('section-visible-state');
            tarotReadingSectionWrapper.classList.remove('section-visible-state');
            tarotReadingSectionWrapper.classList.add('section-hidden-state', 'hidden'); // Start hidden
            userQuestionInput.value = ''; // Clear question input
            currentUserQuestion = "";
            if (tarotDeck.length < 3) { // Check if deck has enough cards
                 showMessage("B·ªô b√†i kh√¥ng ƒë·ªß 3 l√° ƒë·ªÉ tr·∫£i. Vui l√≤ng ki·ªÉm tra l·∫°i c·∫•u h√¨nh b·ªô b√†i.", 5000);
            }
        }

        submitQuestionButton.addEventListener('click', async () => {
            const question = userQuestionInput.value.trim();
            if (!question) {
                showMessage("Xin h√£y cho bi·∫øt ƒëi·ªÅu ng∆∞∆°i trƒÉn tr·ªü.");
                return;
            }
            currentUserQuestion = question;
            displayUserQuestionElement.textContent = `L·ªùi th·ªânh c·∫ßu c·ªßa ng∆∞∆°i: "${currentUserQuestion}"`;
            
            showSection(tarotReadingSectionWrapper, questionSectionWrapper);
            resetTarotReadingView(); // Reset view before new deal
            createDeckVisual(); // Show deck pile
            await shuffleAndDeal(); // Shuffle and deal cards
        });

        cardInnerElements.forEach((cardInnerEl, index) => {
            cardInnerEl.addEventListener('click', () => {
                // Prevent flipping if dealing, not dealt, or already flipped
                if (isDealing || !cardInnerEl.classList.contains('dealt') || cardInnerEl.parentElement.classList.contains('flipped')) {
                    return;
                }

                const cardDataObj = drawnCardsData[index]; // Get data for the clicked card
                if (!cardDataObj) return; // Should not happen if logic is correct
                
                const selectedCard = cardDataObj.data;
                const imgEl = cardInnerEl.querySelector('.tarot-card-back img');
                imgEl.src = selectedCard.img; // Set the image for the card back (which becomes visible)

                cardInnerEl.parentElement.classList.add('flipped'); // Flip the card
                revealedCount++;

                // Display card name and meaning
                cardNamesElements[index].textContent = selectedCard.name;
                cardMeaningsElements[index].textContent = selectedCard.meaning;
                cardInfoDivs[index].classList.remove('hidden');
                initialInfoMessage.classList.add('hidden'); // Hide initial prompt message


                if (revealedCount === 3) { // All cards revealed
                    enableResetButton();
                    getAIInterpretation(drawnCardsData, currentUserQuestion);
                }
            });
        });


        resetButton.addEventListener('click', () => {
            showSection(questionSectionWrapper, tarotReadingSectionWrapper);
            // Delay initialization to allow transition to complete smoothly
            setTimeout(() => {
                initializeNewReadingSession();
            }, 50); // Small delay, adjust if needed
        });

        window.onload = () => {
            initializeNewReadingSession();
            createFireflies(10); // Create 10 dynamic fireflies
            // Fallback for broken card images
            cardImages.forEach((imgElem) => {
                imgElem.onerror = function() {
                    this.onerror=null; // Prevent infinite loop if placeholder also fails
                    this.src=`https://placehold.co/100x170/A0522D/F5DEB3?text=L%C3%A1+B%C3%A0i&font=IM+Fell+English+SC`; // Themed placeholder
                    this.alt='L·ªói t·∫£i ·∫£nh l√° b√†i';
                };
            });
            // Ensure card fronts show the back symbol initially
            cardInnerElements.forEach(innerEl => {
                const frontSymbol = innerEl.querySelector('.tarot-card-front span');
                if (frontSymbol) {
                    frontSymbol.textContent = 'üÇ†';
                }
            });
        };
    </script>
</body>
</html>
ÔøΩ
